import{S as e,i as t,s,k as a,e as i,a9 as r,d as l,n as c,c as n,a as o,b as d,f as u,I as p,O as h,J as m,af as y,L as f,t as v,g,E as b,K as k}from"../../chunks/vendor-51b7d296.js";import{A as w,t as E}from"../../chunks/getAPi-d548b28c.js";function x(e){let t,s;return{c(){t=i("img"),this.h()},l(e){t=n(e,"IMG",{id:!0,src:!0,alt:!0,class:!0}),this.h()},h(){d(t,"id","media"),t.src!==(s=e[0])&&d(t,"src",s),d(t,"alt",e[2]),d(t,"class","svelte-1kne34m")},m(e,s){u(e,t,s)},p(e,a){1&a&&t.src!==(s=e[0])&&d(t,"src",s),4&a&&d(t,"alt",e[2])},d(e){e&&l(t)}}}function q(e){let t,s,a,r,c;return{c(){t=i("video"),s=i("source"),c=v("\n\t\t\tThis media file is supported by this browser"),this.h()},l(e){t=n(e,"VIDEO",{id:!0,controls:!0,autoplay:!0,alt:!0,class:!0});var a=o(t);s=n(a,"SOURCE",{src:!0,type:!0}),c=g(a,"\n\t\t\tThis media file is supported by this browser"),a.forEach(l),this.h()},h(){s.src!==(a=e[0])&&d(s,"src",a),d(s,"type",r=e[1].includes("x-matroska")?"video/webm":e[1]),d(t,"id","media"),t.controls=!0,t.autoplay=!0,d(t,"alt",e[2]),d(t,"class","svelte-1kne34m")},m(e,a){u(e,t,a),b(t,s),b(t,c)},p(e,i){1&i&&s.src!==(a=e[0])&&d(s,"src",a),2&i&&r!==(r=e[1].includes("x-matroska")?"video/webm":e[1])&&d(s,"type",r),4&i&&d(t,"alt",e[2])},d(e){e&&l(t)}}}function I(e){let t,s,a,r;return{c(){t=i("audio"),s=i("source"),r=v("\n\t\t\tThis media file is supported by this browser"),this.h()},l(e){t=n(e,"AUDIO",{id:!0,controls:!0,autoplay:!0,alt:!0,class:!0});var a=o(t);s=n(a,"SOURCE",{src:!0,type:!0}),r=g(a,"\n\t\t\tThis media file is supported by this browser"),a.forEach(l),this.h()},h(){s.src!==(a=e[0])&&d(s,"src",a),d(s,"type",e[1]),d(t,"id","media"),t.controls=!0,t.autoplay=!0,d(t,"alt",e[2]),d(t,"class","svelte-1kne34m")},m(e,a){u(e,t,a),b(t,s),b(t,r)},p(e,i){1&i&&s.src!==(a=e[0])&&d(s,"src",a),2&i&&d(s,"type",e[1]),4&i&&d(t,"alt",e[2])},d(e){e&&l(t)}}}function O(e){let t,s,v,g,b,w,E,O;function j(e,t){var s,a;return(null==g||2&t)&&(g=!!(null==(s=e[1])?void 0:s.includes("audio"))),g?I:((null==b||2&t)&&(b=!!(null==(a=e[1])?void 0:a.includes("video"))),b?q:x)}document.title=t=e[2];let T=j(e,-1),A=T(e);return{c(){s=a(),v=i("div"),A.c(),this.h()},l(e){r('[data-svelte="svelte-2cqwjb"]',document.head).forEach(l),s=c(e),v=n(e,"DIV",{class:!0});var t=o(v);A.l(t),t.forEach(l),this.h()},h(){d(v,"class","flex-grow flex justify-center items-center")},m(e,t){u(e,s,t),u(e,v,t),A.m(v,null),O=!0},p(s,[a]){e=s,(!O||4&a)&&t!==(t=e[2])&&(document.title=t),T===(T=j(e,a))&&A?A.p(e,a):(A.d(1),A=T(e),A&&(A.c(),A.m(v,null)))},i(e){O||(p((()=>{E&&E.end(1),w||(w=m(v,f,{delay:100,start:.8,easing:k,duration:200})),w.start()})),O=!0)},o(e){w&&w.invalidate(),E=h(v,f,{start:.9,easing:y,duration:200}),O=!1},d(e){e&&l(s),e&&l(v),A.d(),e&&E&&E.end()}}}async function j({page:e,fetch:t,session:s,context:a}){const i={storage:e.params.storage,path:escape(e.query.get("path")),ctype:e.query.get("ctype")||"video",dkey:e.query.get("dkey"),size:e.query.get("size")};let r=w+"/"+(i.ctype.includes("image")?"image":"media")+E(i);const l=i.path.split("/").reverse()[0];return{props:{ctype:i.ctype,url:r,filename:l}}}function T(e,t,s){let{url:a}=t,{ctype:i}=t,{filename:r}=t;return e.$$set=e=>{"url"in e&&s(0,a=e.url),"ctype"in e&&s(1,i=e.ctype),"filename"in e&&s(2,r=e.filename)},[a,i,r]}class A extends e{constructor(e){super(),t(this,e,T,O,s,{url:0,ctype:1,filename:2})}}export{A as default,j as load};
