import{S as e,i as t,s,e as n,c as r,a,d as c,f as l,F as o,Q as i,t as u,g as h,b as d,E as f,U as m,h as p,k as g,l as y,n as b,a9 as v,u as x,w as k,x as $,R as E,aq as w,r as j,T as I,ar as D,j as T,m as V,o as N,v as q}from"../../chunks/vendor-51b7d296.js";import{t as z,a as L,A as F}from"../../chunks/getAPi-d548b28c.js";import{s as M}from"../../chunks/index-16bd9a46.js";import"../../chunks/singletons-bb9012b7.js";function S(e){let t,s,u;return{c(){t=n("div")},l(e){t=r(e,"DIV",{}),a(t).forEach(c)},m(n,r){l(n,t,r),s||(u=o(e[0].call(null,t)),s=!0)},p:i,i:i,o:i,d(e){e&&c(t),s=!1,u()}}}function A(e,t,s){let{content:n=""}=t;return e.$$set=e=>{"content"in e&&s(1,n=e.content)},[e=>{e.attachShadow({mode:"open"}).innerHTML=n},n]}class H extends e{constructor(e){super(),t(this,e,A,S,s,{content:1})}}function O(e){let t,s;return{c(){t=n("pre"),s=n("code"),this.h()},l(e){t=r(e,"PRE",{});var n=a(t);s=r(n,"CODE",{class:!0}),a(s).forEach(c),n.forEach(c),this.h()},h(){d(s,"class","hljs")},m(n,r){l(n,t,r),f(t,s),s.innerHTML=e[4]},p(e,t){16&t&&(s.innerHTML=e[4])},i:i,o:i,d(e){e&&c(t)}}}function R(e){let t,s,n,r,a;const o=[P,K],i=[];function u(e,s){return 2&s&&(t=!!e[1].includes("markdown")),t?0:1}return s=u(e,-1),n=i[s]=o[s](e),{c(){n.c(),r=y()},l(e){n.l(e),r=y()},m(e,t){i[s].m(e,t),l(e,r,t),a=!0},p(e,t){let a=s;s=u(e,t),s===a?i[s].p(e,t):(j(),x(i[a],1,1,(()=>{i[a]=null})),k(),n=i[s],n?n.p(e,t):(n=i[s]=o[s](e),n.c()),$(n,1),n.m(r.parentNode,r))},i(e){a||($(n),a=!0)},o(e){x(n),a=!1},d(e){i[s].d(e),e&&c(r)}}}function K(e){let t,s;return{c(){t=n("iframe"),this.h()},l(e){t=r(e,"IFRAME",{src:!0,frameborder:!0,class:!0,title:!0}),a(t).forEach(c),this.h()},h(){t.src!==(s=F+e[2])&&d(t,"src",s),d(t,"frameborder","0"),d(t,"class","w-full flex-grow"),d(t,"title","filename")},m(e,s){l(e,t,s)},p(e,n){4&n&&t.src!==(s=F+e[2])&&d(t,"src",s)},i:i,o:i,d(e){e&&c(t)}}}function P(e){let t,s;return t=new H({props:{content:D(e[0])}}),{c(){T(t.$$.fragment)},l(e){V(t.$$.fragment,e)},m(e,n){N(t,e,n),s=!0},p(e,s){const n={};1&s&&(n.content=D(e[0])),t.$set(n)},i(e){s||($(t.$$.fragment,e),s=!0)},o(e){x(t.$$.fragment,e),s=!1},d(e){q(t,e)}}}function U(e){let t;return{c(){t=n("link"),this.h()},l(e){t=r(e,"LINK",{rel:!0,href:!0}),this.h()},h(){d(t,"rel","stylesheet"),d(t,"href","https://unpkg.com/@highlightjs/cdn-assets@10.6.0/styles/night-owl.min.css")},m(e,s){l(e,t,s)},d(e){e&&c(t)}}}function B(e){let t;return{c(){t=n("link"),this.h()},l(e){t=r(e,"LINK",{rel:!0,href:!0}),this.h()},h(){d(t,"rel","stylesheet"),d(t,"href","https://unpkg.com/@highlightjs/cdn-assets@10.6.0/styles/foundation.min.css")},m(e,s){l(e,t,s)},d(e){e&&c(t)}}}function C(e){let t,s,o,i,E,w,I,D,T,V,N,q,z,L,F,M,S,A,H=e[9]&&function(e){let t,s,o,i,g,y,b=e[5]?"un":"";return{c(){t=n("div"),s=n("button"),o=u(b),i=u("render"),this.h()},l(e){t=r(e,"DIV",{});var n=a(t);s=r(n,"BUTTON",{class:!0});var l=a(s);o=h(l,b),i=h(l,"render"),l.forEach(c),n.forEach(c),this.h()},h(){d(s,"class","bg-blue-200 p-1 rounded-sm text-lg text-gray-700 active:ring-1 active:ring-blue-300 capitalize")},m(n,r){l(n,t,r),f(t,s),f(s,o),f(s,i),g||(y=m(s,"click",e[10]),g=!0)},p(e,t){32&t&&b!==(b=e[5]?"un":"")&&p(o,b)},d(e){e&&c(t),g=!1,y()}}}(e);const K=[R,O],P=[];function C(e,t){return e[9]&&e[5]?0:1}function J(e,t){return"light"===e[6]?B:U}z=C(e),L=P[z]=K[z](e),document.title=M=e[3];let Q=J(e),G=Q(e);return{c(){t=n("div"),s=n("div"),o=n("div"),i=u("Type: "),E=u(e[1]),w=g(),H&&H.c(),I=g(),D=n("div"),T=u("Filename: "),V=u(e[3]),N=g(),q=n("div"),L.c(),F=g(),G.c(),S=y(),this.h()},l(n){t=r(n,"DIV",{class:!0});var l=a(t);s=r(l,"DIV",{class:!0});var u=a(s);o=r(u,"DIV",{});var d=a(o);i=h(d,"Type: "),E=h(d,e[1]),d.forEach(c),w=b(u),H&&H.l(u),I=b(u),D=r(u,"DIV",{});var f=a(D);T=h(f,"Filename: "),V=h(f,e[3]),f.forEach(c),u.forEach(c),N=b(l),q=r(l,"DIV",{class:!0});var m=a(q);L.l(m),m.forEach(c),l.forEach(c),F=b(n);const p=v('[data-svelte="svelte-wkcaz4"]',document.head);G.l(p),S=y(),p.forEach(c),this.h()},h(){d(s,"class","flex justify-around text-lg dark:text-blue-300"),d(q,"class","border-t-2 border-gray-600 mt-1 dark:text-blue-200 flex-grow flex flex-col"),d(t,"class","flex flex-col flex-grow")},m(e,n){l(e,t,n),f(t,s),f(s,o),f(o,i),f(o,E),f(s,w),H&&H.m(s,null),f(s,I),f(s,D),f(D,T),f(D,V),f(t,N),f(t,q),P[z].m(q,null),l(e,F,n),G.m(document.head,null),f(document.head,S),A=!0},p(e,[t]){(!A||2&t)&&p(E,e[1]),e[9]&&H.p(e,t),(!A||8&t)&&p(V,e[3]);let s=z;z=C(e),z===s?P[z].p(e,t):(j(),x(P[s],1,1,(()=>{P[s]=null})),k(),L=P[z],L?L.p(e,t):(L=P[z]=K[z](e),L.c()),$(L,1),L.m(q,null)),(!A||8&t)&&M!==(M=e[3])&&(document.title=M),Q!==(Q=J(e))&&(G.d(1),G=Q(e),G&&(G.c(),G.m(S.parentNode,S)))},i(e){A||($(L),A=!0)},o(e){x(L),A=!1},d(e){e&&c(t),H&&H.d(),P[z].d(),e&&c(F),G.d(e),c(S)}}}async function J({page:e,fetch:t,session:s,context:n}){const r={storage:e.params.storage,path:e.query.get("path"),ctype:e.query.get("ctype"),dkey:e.query.get("dkey"),size:e.query.get("size")};let a="/textfile"+z(r);const c=await L.get(a);let l=c.body;r.ctype.includes("json")&&(l=JSON.stringify(c.body));const o=r.path.split("/").reverse()[0];return console.log("resp-text",c),{props:{ctype:r.ctype,body:l,filename:o,url:a}}}function Q(e,t,s){let n,r,{body:a=""}=t,{ctype:c=""}=t,{url:l=""}=t,{filename:o=""}=t;const i=M.g("colorScheme");E(e,i,(e=>s(6,r=e)));const u=M.g("render");E(e,u,(e=>s(5,n=e)));const h=o.includes("html")||o.includes("xml")||c.includes("markdown");let d;return e.$$set=e=>{"body"in e&&s(0,a=e.body),"ctype"in e&&s(1,c=e.ctype),"url"in e&&s(2,l=e.url),"filename"in e&&s(3,o=e.filename)},e.$$.update=()=>{if(3&e.$$.dirty)try{s(4,d=w(c.replace(/[a-z]+\//,""),a))}catch(t){console.log("language unknown")}},[a,c,l,o,d,n,r,i,u,h,()=>I(u,n=!n,n)]}class G extends e{constructor(e){super(),t(this,e,Q,C,s,{body:0,ctype:1,url:2,filename:3})}}export{G as default,J as load};
